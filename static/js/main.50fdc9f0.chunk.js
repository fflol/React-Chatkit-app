(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){e.exports=n(18)},17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(9),o=n.n(s),c=n(1),i=n(2),u=n(4),l=n(3),m=n(5),h=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).onChange=function(e){n.setState({username:e.target.value})},n.onSubmit=function(e){e.preventDefault(),n.props.onSubmit(n.state.username)},n.state={username:""},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"container mt-5"},a.a.createElement("h1",{className:"mt-5"},"the Council of li\u2019l Tibet in Exile"),a.a.createElement("form",{className:"mt-4",onSubmit:this.onSubmit},a.a.createElement("input",{className:"form-control",type:"text",placeholder:"Your alias...",onChange:this.onChange})))}}]),t}(a.a.Component),p=n(7),f=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=document.documentElement.clientHeight-40;return a.a.createElement("ul",{className:"overflow-auto pr-5",style:{height:t}},this.props.messages.map(function(t,n){var r=t.senderId===e.props.currentUsername?"right":"left";return a.a.createElement("li",{style:{textAlign:r},key:n},a.a.createElement("span",{style:{fontWeight:"bold"}},t.senderId),a.a.createElement("p",null,t.parts[0].payload.content),a.a.createElement("br",null))}))}}]),t}(a.a.Component),b=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).onChange=function(e){n.setState({text:e.target.value}),n.props.onChange()},n.onSubmit=function(e){e.preventDefault(),n.props.onSubmit(n.state.text),n.setState({text:""})},n.state={text:""},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return a.a.createElement("form",{onSubmit:this.onSubmit},a.a.createElement("input",{style:{height:"40px"},className:"form-control",type:"text",placeholder:"",value:this.state.text,onChange:this.onChange}))}}]),t}(a.a.Component),d=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return 0===this.props.usersWhoAreTyping.length?a.a.createElement("div",null):1===this.props.usersWhoAreTyping.length?a.a.createElement("p",null,this.props.usersWhoAreTyping[0]," is typing..."):a.a.createElement("p",null,this.props.usersWhoAreTyping.join(" and ")," are typing...")}}]),t}(a.a.Component),g=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.props.users?a.a.createElement("ul",{className:"bg-dark text-white d-none d-sm-block px-4 py-5",style:{height:"100vh"}},this.props.users.map(function(e,t){var n="online"===e.presence.state?"online":"offline";return a.a.createElement("li",{className:n,key:t},e.name)})):a.a.createElement("p",null,"Loading...")}}]),t}(a.a.Component),v=n(6),y=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).sendMessage=function(t){e.state.currentUser.sendMessage({roomId:e.state.currentRoom.id,text:t})},e.sendTypingEvent=function(){e.state.currentUser.isTypingIn({roomId:e.state.currentRoom.id}).catch(function(e){return console.log(e)})},e.state={messages:[],currentRoom:{},currentUser:{},usersWhoAreTyping:[]},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"componentDidMount",value:function(){var e=this;this.ul=document.querySelector("ul.overflow-auto"),this.timerID=setInterval(function(){e.scrollToBottom()},1e3),new v.ChatManager({instanceLocator:"v1:us1:dcb23730-193e-4b92-8186-ffc227c1077d",userId:this.props.currentUsername,tokenProvider:new v.TokenProvider({url:"https://us1.pusherplatform.io/services/chatkit_token_provider/v1/dcb23730-193e-4b92-8186-ffc227c1077d/token"})}).connect().then(function(t){return e.setState({currentUser:t}),t.subscribeToRoomMultipart({roomId:"31216441",hooks:{onMessage:function(t){e.setState({messages:[].concat(Object(p.a)(e.state.messages),[t])})},onUserStartedTyping:function(t){e.setState({usersWhoAreTyping:[].concat(Object(p.a)(e.state.usersWhoAreTyping),[t.name])})},onUserStoppedTyping:function(t){e.setState({usersWhoAreTyping:e.state.usersWhoAreTyping.filter(function(e){return e!==t.name})})},onUserCameOnline:function(){return e.forceUpdate()},onUserwentOffline:function(){return e.forceUpdate()},onUserJoined:function(){return e.forceUpdate()}}})}).then(function(t){e.setState({currentRoom:t})}).catch(function(e){return console.log(e)})}},{key:"scrollToBottom",value:function(){this.ul&&(this.ul.scrollTop=1e5)}},{key:"render",value:function(){return a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"row",style:{height:"100vh"}},a.a.createElement("div",{className:"col-sm-3 p-0"},a.a.createElement(g,{users:this.state.currentRoom.users})),a.a.createElement("div",{className:"col-sm-9 p-0",style:{height:"100vh"}},a.a.createElement(f,{currentUsername:this.props.currentUsername,messages:this.state.messages}),a.a.createElement(d,{usersWhoAreTyping:this.state.usersWhoAreTyping}),a.a.createElement(b,{onSubmit:this.sendMessage,onChange:this.sendTypingEvent}))))}}]),t}(a.a.Component),O=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).onUsernameSubmitted=function(e){n.setState({currentUsername:e,currentScreen:"ChatScreen"})},n.state={currentScreen:"WhatIsYourUsernameScreen",currentUsername:""},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return"WhatIsYourUsernameScreen"===this.state.currentScreen?a.a.createElement(h,{onSubmit:this.onUsernameSubmitted}):"ChatScreen"===this.state.currentScreen?a.a.createElement(y,{currentUsername:this.state.currentUsername}):void 0}}]),t}(r.Component);n(17);o.a.render(a.a.createElement(O,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.50fdc9f0.chunk.js.map