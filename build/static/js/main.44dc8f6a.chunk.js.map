{"version":3,"sources":["../node_modules/keyv/src sync","../node_modules/@pusher/chatkit-server/node_modules/got/source sync","components/UsernameForm.js","components/MessageList.js","components/SendMessageForm.js","components/TypingIndicator.js","components/WhosOnlineList.js","ChatScreen.js","App.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","UsernameForm","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","onChange","setState","username","target","value","onSubmit","preventDefault","state","react_default","a","createElement","className","type","placeholder","React","Component","MessageList","height","document","documentElement","clientHeight","style","messages","map","message","index","align","senderId","currentUsername","textAlign","key","fontWeight","parts","payload","content","SendMessageForm","text","TypingIndicator","usersWhoAreTyping","length","join","WhosOnlineList","users","user","onlineStatus","presence","name","ChatScreen","sendMessage","currentUser","roomId","currentRoom","sendTypingEvent","isTypingIn","catch","error","console","log","clearInterval","timerID","_this2","ul","querySelector","setInterval","scrollToBottom","ChatManager","instanceLocator","userId","tokenProvider","TokenProvider","url","connect","then","subscribeToRoomMultipart","hooks","onMessage","concat","toConsumableArray","onUserStartedTyping","onUserStoppedTyping","filter","onUserCameOnline","forceUpdate","onUserwentOffline","onUserJoined","scrollTop","components_WhosOnlineList","components_MessageList","components_TypingIndicator","components_SendMessageForm","Chatkit","require","App","onUsernameSubmitted","currentScreen","default","createUser","components_UsernameForm","src_ChatScreen","ReactDOM","render","src_App","getElementById"],"mappings":"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","file":"static/js/main.44dc8f6a.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 254;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 262;","import React from 'react'\r\n\r\nclass UsernameForm extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            username: ''\r\n        }\r\n    }\r\n\r\n    onChange = (e) => {\r\n        this.setState({\r\n            username: e.target.value\r\n        })\r\n    }\r\n\r\n    onSubmit = (e) => {\r\n        e.preventDefault()\r\n        this.props.onSubmit(this.state.username)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className='container mt-5'>\r\n                <h1 className='mt-5'>the Council of liâ€™l Tibet in Exile</h1>\r\n                <form className='mt-4' onSubmit={this.onSubmit}>\r\n                    <input className='form-control' type=\"text\" placeholder='Your alias...' onChange={this.onChange} />\r\n                </form>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default UsernameForm","import React from 'react'\r\n\r\nclass MessageList extends React.Component {\r\n    render() {\r\n        const height = document.documentElement.clientHeight - 40\r\n\r\n        return (\r\n            <ul className='overflow-auto pr-5'\r\n                style={{ height: height }}\r\n            >\r\n                {this.props.messages.map((message, index) => {\r\n                    const align = message.senderId === this.props.currentUsername ? 'right' : 'left'\r\n                    return (\r\n                        <li style={{textAlign: align}} key={index}>\r\n                                <span style={{ fontWeight: 'bold' }}>{message.senderId}</span>\r\n                                <p>{message.parts[0].payload.content}</p>\r\n                                <br />\r\n                        </li>)\r\n                })}\r\n            </ul>\r\n        )\r\n    }\r\n}\r\n\r\nexport default MessageList","import React from 'react'\r\n\r\n\r\nclass SendMessageForm extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            text: ''\r\n        }\r\n    }\r\n\r\n    onChange = (e) => {\r\n        this.setState({\r\n            text: e.target.value\r\n        })\r\n        this.props.onChange()\r\n    }\r\n\r\n    onSubmit = (e) => {\r\n        e.preventDefault()\r\n        this.props.onSubmit(this.state.text)\r\n        this.setState({text:''})\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <form onSubmit={this.onSubmit}>\r\n                <input style={{ height: '40px' }} className='form-control' type=\"text\" placeholder='' value={this.state.text} onChange={this.onChange} />\r\n            </form>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nexport default SendMessageForm","import React from 'react'\r\n\r\nclass TypingIndicator extends React.Component {\r\n    render() {\r\n        if (this.props.usersWhoAreTyping.length === 0) return (\r\n        <div></div>\r\n        ) \r\n        else if(this.props.usersWhoAreTyping.length === 1) return (\r\n        <p>{this.props.usersWhoAreTyping[0]} is typing...</p>\r\n        )\r\n        else return (\r\n            <p>{this.props.usersWhoAreTyping.join(' and ')} are typing...</p>\r\n        )\r\n    }     \r\n}\r\n\r\nexport default TypingIndicator","import React from 'react'\r\n\r\nclass WhosOnlineList extends React.Component {\r\n    render() {        \r\n        if (this.props.users) {\r\n            return (\r\n                <ul className='bg-dark text-white d-none d-sm-block px-4 py-5' style={{ height: '100vh' }}>\r\n                    {this.props.users.map((user, index) => {\r\n                        const onlineStatus = user.presence.state === 'online' ? 'online' : 'offline' \r\n                        return <li className={onlineStatus} key={index}>{user.name}</li>\r\n                    })}\r\n                </ul>\r\n            )\r\n        } else {\r\n            return <p>Loading...</p>\r\n        }\r\n    }\r\n}\r\n\r\nexport default WhosOnlineList","import React from 'react'\r\nimport MessageList from './components/MessageList'\r\nimport SendMessageForm from './components/SendMessageForm'\r\nimport TypingIndicator from './components/TypingIndicator'\r\nimport WhosOnlineList from './components/WhosOnlineList'\r\nimport { ChatManager, TokenProvider } from '@pusher/chatkit-client/react-native'\r\n\r\nclass ChatScreen extends React.Component {\r\n    constructor() {\r\n        super()\r\n        this.state = {\r\n            messages: [],\r\n            currentRoom: {},\r\n            currentUser: {},\r\n            usersWhoAreTyping: [],\r\n            // scrollHeight: ''\r\n        }        \r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.timerID)\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.ul = document.querySelector('ul.overflow-auto');\r\n        this.timerID = setInterval(() => {\r\n            this.scrollToBottom()\r\n        }, 1000);\r\n\r\n        const chatManager = new ChatManager({\r\n            instanceLocator: 'v1:us1:dcb23730-193e-4b92-8186-ffc227c1077d',\r\n            userId: this.props.currentUsername,\r\n            tokenProvider: new TokenProvider({\r\n                url: 'https://us1.pusherplatform.io/services/chatkit_token_provider/v1/dcb23730-193e-4b92-8186-ffc227c1077d/token'\r\n            }),\r\n        })\r\n\r\n        chatManager\r\n            .connect()\r\n            .then(currentUser => {\r\n                this.setState({ currentUser: currentUser })\r\n                return currentUser.subscribeToRoomMultipart({\r\n                    roomId: '31216441',\r\n                    hooks: {\r\n                        onMessage: message => {\r\n                            this.setState({\r\n                                messages: [...this.state.messages, message]\r\n                            })\r\n                        },\r\n                        onUserStartedTyping: user => {\r\n                            this.setState({\r\n                                usersWhoAreTyping: [...this.state.usersWhoAreTyping, user.name]\r\n                            })\r\n                        },\r\n                        onUserStoppedTyping: user => {\r\n                            this.setState({\r\n                                usersWhoAreTyping: this.state.usersWhoAreTyping.filter(\r\n                                    username => username !== user.name\r\n                                )\r\n                            })\r\n                        },\r\n                        onUserCameOnline: () => this.forceUpdate(),\r\n                        onUserwentOffline: () => this.forceUpdate(),\r\n                        onUserJoined: () => this.forceUpdate(),\r\n                    },\r\n                })\r\n            })\r\n            .then(currentRoom => { this.setState({ currentRoom: currentRoom }) })\r\n            .catch(error => console.log(error))\r\n    }\r\n\r\n    scrollToBottom() {\r\n        this.ul && (this.ul.scrollTop = 100000)\r\n    }\r\n\r\n    sendMessage = (text) => {\r\n        this.state.currentUser.sendMessage({\r\n            roomId: this.state.currentRoom.id,\r\n            text: text\r\n        })\r\n    }\r\n\r\n    sendTypingEvent = () => {\r\n        this.state.currentUser\r\n            .isTypingIn({ roomId: this.state.currentRoom.id })\r\n            .catch(error => console.log(error))\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className='container'>\r\n                <div className='row' style={{ height: '100vh' }}>\r\n                    <div className='col-sm-3 p-0'>\r\n                        <WhosOnlineList users={this.state.currentRoom.users} />\r\n                    </div>\r\n                    <div className='col-sm-9 p-0' style={{ height: '100vh' }}>\r\n                        <MessageList currentUsername={this.props.currentUsername} messages={this.state.messages} />\r\n                        <TypingIndicator usersWhoAreTyping={this.state.usersWhoAreTyping} />\r\n\r\n                        <SendMessageForm onSubmit={this.sendMessage} onChange={this.sendTypingEvent} />\r\n                    </div>\r\n                </div >\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nexport default ChatScreen","import React, { Component } from 'react'\r\nimport UsernameForm from './components/UsernameForm'\r\nimport ChatScreen from './ChatScreen'\r\n// const bodyParser = require('body-parser')\r\n// const cors = require('cors')\r\nconst Chatkit = require('@pusher/chatkit-server')\r\n// const express = require('express')\r\n\r\n\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      currentScreen: 'WhatIsYourUsernameScreen',\r\n      currentUsername: '',\r\n    }\r\n  }\r\n\r\n  onUsernameSubmitted = (username) => {\r\n\r\n    // fetch('http://localhost:3001/users', {\r\n    //   method: 'POST',\r\n    //   headers: {\r\n    //     'Content-Type': 'application/json'\r\n    //   },\r\n    //   body: JSON.stringify({ username })\r\n    // })\r\n    // .then(response => {\r\n    this.setState({\r\n      currentUsername: username,\r\n      currentScreen: 'ChatScreen'\r\n    })\r\n  }\r\n\r\n  //     })\r\n  //     .catch(error => console.log(error))\r\n  // }\r\n\r\n  render() {\r\n\r\n    const chatkit = new Chatkit.default({\r\n      instanceLocator: 'v1:us1:dcb23730-193e-4b92-8186-ffc227c1077d',\r\n      key: '79cad382-328c-458f-85bb-10ef772f53ba:DgeqRa/pqpLJvD3FmNPISmHBn/3hzZYmZyo0W2TBybw=',\r\n    })\r\n\r\n    chatkit.createUser({\r\n      id: this.state.currentUsername,\r\n      name: this.state.currentUsername\r\n    })\r\n\r\n    if (this.state.currentScreen === 'WhatIsYourUsernameScreen') {\r\n      return (<UsernameForm onSubmit={this.onUsernameSubmitted} />)\r\n    } else if (this.state.currentScreen === 'ChatScreen') {\r\n      return (<ChatScreen currentUsername={this.state.currentUsername} />)\r\n    }\r\n  }\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))\r\n"],"sourceRoot":""}